pipeline {
    // add your slave label name
    agent { label 'deploy'}
    tools{
        maven 'maven-test'
    }
    stages {
        stage ('Checkout SCM') {

            steps {
          	    
	     checkout scm
            }
        }

        stage ('Build') {

            steps {
               sh "mvn install -Dmaven.plugin.validation=VERBOSE"
		sh 'mvn clean package'
            }
        }
        
        stage ('deploy') {

            steps {
               sshagent{['tomcat-web-server']}{
	      sh "scp -o StrictHostKeyChecking-no target/maven-web-application.war  ec2-user@13.48.105.106:/opt/tomcat9/webapps/"
                 
	     
	     }   
            }
         }

      }  
    }

